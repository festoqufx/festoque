!function(s,e){"use strict";s.fn.SuperBox=function(e){var o=s.extend({background:null,border:null,height:400,view:"landscape",xColor:null,xShadow:"none"},e),n=!1,i=!1,r=s('<div class="superbox-show"/>'),t=s('<img src="img/ajax-loader.gif" class="superbox-current-img"/>'),u=s('<a href="#" class="superbox-close"><i class="icon-remove-sign"></i></a>'),p=s('<a href="#" class="superbox-prev"><i class="icon-circle-arrow-left"></i></a>'),a=s('<a href="#" class="superbox-next"><i class="icon-circle-arrow-right"></i></a>'),d=s('<div class="superbox-float"/>'),l=this.find(">div"),x=this.find(">div:nth-child(8n)"),c=this.find(">div:nth-child(6n)"),f=this.find(">div:nth-child(4n)"),b=this.find(">div:nth-child(2n)"),h=this,w=function(s){var e=function(s){var e,o="superbox-"+s,n=["superbox-last","superbox-8","superbox-6","superbox-4","superbox-2"];8===s?e=x:6===s?e=c:4===s?e=f:2===s&&(e=b);for(var i=n.length-1;i>=0;i--)l.removeClass(n[i]);l.addClass(o),e.add(l.last()).addClass("superbox-last"),h.find(".superbox-show").outerWidth(!0)!=l.width()*s&&h.find(".superbox-show").outerWidth(l.width()*s)};e(h.width()>1024?8:h.width()>767?6:h.width()>320?4:2)},g=function(){var e=h.find(".superbox-show").outerWidth(!0),n=o.height+48,i=n,r=.8*s(window).height(),t=o.view,u=.6667;i>r&&(i=r),"landscape"===t&&i/u>e&&(i=e*u),"portrait"===t&&i*u>e&&(i=e/u),"square"===t&&i>e&&(i=e),h.find(".superbox-show").outerHeight(i)},m=function(e){var o=!h.find(".superbox-show").length,d=e.hasClass("superbox-O"),x=!e.hasClass("superbox-last"),c=!e.nextAll(".superbox-last:first").next(".superbox-show").length,f=!e.next(".superbox-show").length,b=function(o){"A"===o?r.append(t).append(u).append(p).append(a).insertAfter(e.nextAll(".superbox-last:first")):r.append(t).append(u).insertAfter(e),g(),w(),m(),h.find(".superbox-show").slideDown("slow",function(){C(),k(!0),y(!0),i===!1&&(h.find(".superbox-prev,.superbox-next").on("click",function(e){S(s(this),e),i=!0}),s(document.documentElement).keyup(function(e){A()===!0&&(S(s(this),e),i=!0)}))})},m=function(){h.find(".superbox-show img.superbox-current-img").attr("src",e.find("img").data("img")),v()},v=function(){var s=new Image,o=new Image;s.src=e.prev(".superbox-list").find("img").data("img"),o.src=e.nextAll(".superbox-list:first").find("img").data("img")},C=function(){s("html, body").animate({scrollTop:h.find(".superbox-show").offset().top-e.width()},"medium")},A=function(){var e=s(window).scrollTop(),o=e+s(window).height(),n=h.find(".superbox-show").offset().top,i=n+h.find(".superbox-show").height();return o>=i&&n>=e},k=function(s){s===!0?(l.removeClass("superbox-O"),e.addClass("superbox-O")):l.removeClass("superbox-O")},y=function(s){s===!0?(h.find(".superbox-show img.superbox-current-img").animate({opacity:1},750),n===!1&&O(!0)):h.find(".superbox-show img.superbox-current-img").animate({opacity:0},100,function(){m()})},O=function(s){s===!0?(n=!0,h.find(".superbox-close, .superbox-prev, .superbox-next").animate({opacity:.7},750)):(n=!1,h.find(".superbox-close, .superbox-prev, .superbox-next").animate({opacity:0},100))},S=function(s,e){e.preventDefault();var o=null,n=null;37==e.keyCode||s.hasClass("superbox-prev")?(o="prev",n=".superbox-list"):(39==e.keyCode||s.hasClass("superbox-next"))&&(o="nextAll",n=".superbox-list:first"),null!==o&&h.find(".superbox-O")[o](n).click()},B=function(){y(!1),y(!0),k(!0)},D=function(){var e=function(){y(!1),O(!1),h.find(".superbox-show").slideUp(function(){s(this).remove(),k(!1),i=!1})};h.find(".superbox-close").on("click",function(s){s.preventDefault(),e()}),d===!0&&e()};d===!1&&(x===!0&&c===!0?o===!0?b("A"):(y(!1),O(!1),h.find(".superbox-show").slideUp(function(){b("A")})):x===!1&&f===!0?o===!0?b("B"):(y(!1),O(!1),h.find(".superbox-show").slideUp(function(){b("B")})):B()),D()},v=function(){s(window).resize(function(){h.find(".superbox-O").hasClass("superbox-last")?h.find(".superbox-show").insertAfter(h.find(".superbox-O")):h.find(".superbox-show").insertAfter(h.find(".superbox-O").nextAll(".superbox-last:first"))})},C=function(){null!==o.background&&h.find(".superbox-show").css("background-color",o.background),null!==o.border&&h.find(".superbox-show img.superbox-current-img").css("border-color",o.border),null!==o.xColor&&h.find(".superbox-close, .superbox-prev, .superbox-next").css("color",o.xColor),"emboss"==o.xShadow?h.find(".superbox-close, .superbox-prev, .superbox-next").css("text-shadow","0 1px 0 rgba(0,0,0,0.6), 0 -1px 0 rgba(250,250,250,0.2)"):"embed"==o.xShadow&&h.find(".superbox-close, .superbox-prev, .superbox-next").css("text-shadow","0 -1px 0 rgba(0,0,0,0.4), 0 1px 0 rgba(250,250,250,0.5)")};return this.addClass("superbox-active"),l.addClass("superbox-list"),w(),s(window).resize(function(){g(),w()}),d.appendTo(this),l.on("mouseenter",function(){var e=new Image,o=s(this).find("img").data("img");s(e).attr("src",o)}),l.on("click",function(){m(s(this)),C()}),v(),this}}(jQuery);